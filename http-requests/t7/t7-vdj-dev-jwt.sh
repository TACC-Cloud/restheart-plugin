#!/usr/bin/env bash

# testuser7 jwt from aloe.dev
export jwt="X-JWT-Assertion-dev:eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5tSm1PR1V4TXpabFlqTTJaRFJoTlRabFlUQTFZemRoWlRSaU9XRTBOV0kyTTJKbU9UYzFaQT09In0=.eyJpc3MiOiJ3c28yLm9yZy9wcm9kdWN0cy9hbSIsImV4cCI6MTU2NTM1OTExMzkyMiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9zdWJzY3JpYmVyIjoiQUxPRURFVi90ZXN0dXNlcjciLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2FwcGxpY2F0aW9uaWQiOiI2NjkiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2FwcGxpY2F0aW9ubmFtZSI6InJzdGhydGFwcCIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvYXBwbGljYXRpb250aWVyIjoiVW5saW1pdGVkIiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9hcGljb250ZXh0IjoiL3JoL3YyIiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy92ZXJzaW9uIjoidjIiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL3RpZXIiOiJVbmxpbWl0ZWQiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2tleXR5cGUiOiJQUk9EVUNUSU9OIiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy91c2VydHlwZSI6IkFQUExJQ0FUSU9OIiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9lbmR1c2VyIjoidGVzdHVzZXI3QGNhcmJvbi5zdXBlciIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvZW5kdXNlclRlbmFudElkIjoiLTEyMzQiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2VtYWlsYWRkcmVzcyI6InRlc3R1c2VyN0B0YWNjLnV0ZXhhcy5lZHUiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2Z1bGxuYW1lIjoidGVzdHVzZXI3IiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9sYXN0bmFtZSI6InRlc3R1c2VyNyIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvcm9sZSI6IkludGVybmFsL0FMT0VERVZfdGVzdHVzZXI3X3JzdGhydGFwcF9QUk9EVUNUSU9OLEludGVybmFsL0FMT0VERVZfdGVzdHVzZXI3X3JoYXBwX1BST0RVQ1RJT04sSW50ZXJuYWwvQUxPRURFVl90ZXN0dXNlcjdfYXBwMl9QUk9EVUNUSU9OLEludGVybmFsL0FMT0VERVZfdGVzdHVzZXI3X0RlZmF1bHRBcHBsaWNhdGlvbl9QUk9EVUNUSU9OLEludGVybmFsL3ZkaixJbnRlcm5hbC9BTE9FREVWX3Rlc3R1c2VyN190ZXN0X2FwcF9QUk9EVUNUSU9OLEludGVybmFsL0FMT0VERVZfdGVzdHVzZXI3X3NsdGFwcF9QUk9EVUNUSU9OLEludGVybmFsL2FiYWNvLWFkbWluLEludGVybmFsL2V2ZXJ5b25lLEludGVybmFsL2Rlc2lnbnNhZmUsSW50ZXJuYWwvQUxPRURFVl90ZXN0dXNlcjdfcG93X1BST0RVQ1RJT04ifQ==.JtMl6YCIniV3hCTSbdaiQGNCLV+ck+d9OoNI/Ybvly5eWht/KZtIqAhyd90wfKLvyv6U3D2vSMHxDCvSoElCR+3i2J8I5omcWZjEfR6Agi6fQyUPRimwEv4gOqOhSUuKI66lWYacgGXuoyPHIfh/r2kdR3oSq9ZUqFV2hi+RNqk="
# get the first 1000 docs in collection
# curl -v -X GET -H "$jwt" http://aloe-dev02.tacc.utexas.edu/rh/v1public/rearrangement?pagesize=1000 | jq

# t7 vdj Scotts query brief
# filter={"filename_uuid":{"$in":["1948223626708128231-242ac11c-0001-012","4003519959228944871-242ac11c-0001-012","618590739453186536-242ac11c-0001-012","4112542236705559016-242ac11c-0001-012","228498719656439320-242ac11c-0001-012","5799996335674626536-242ac11c-0001-012"]},"ir_cdr3_substrings":"CASSP"}
# curl -v -X GET -H "$jwt" http://aloe-dev02.tacc.utexas.edu/rh/v1public/rearrangement?filter%3D%7B%22filename_uuid%22%3A%7B%22%24in%22%3A%5B%221948223626708128231-242ac11c-0001-012%22%2C%224003519959228944871-242ac11c-0001-012%22%2C%22618590739453186536-242ac11c-0001-012%22%2C%224112542236705559016-242ac11c-0001-012%22%2C%22228498719656439320-242ac11c-0001-012%22%2C%225799996335674626536-242ac11c-0001-012%22%5D%7D%2C%22ir_cdr3_substrings%22%3A%22CASSP%22%7D


# t7 vdj Scotts query full version
# filter={"filename_uuid":{"$in":["1948223626708128231-242ac11c-0001-012","4003519959228944871-242ac11c-0001-012","618590739453186536-242ac11c-0001-012","4112542236705559016-242ac11c-0001-012","228498719656439320-242ac11c-0001-012","5799996335674626536-242ac11c-0001-012","4033258450224288231-242ac11c-0001-012","4184909141241565671-242ac11c-0001-012","5609034397249245671-242ac11c-0001-012","718414304763122151-242ac11c-0001-012","6797709546090205671-242ac11c-0001-012","6883137545118552551-242ac11c-0001-012","7421212147472339431-242ac11c-0001-012","2793798164965822951-242ac11c-0001-012","1579330526434291225-242ac11c-0001-012","2531606071098928665-242ac11c-0001-012","8135350378552562151-242ac11c-0001-012","4774237821721842151-242ac11c-0001-012","2030956310420722151-242ac11c-0001-012","7643474506018525671-242ac11c-0001-012","1399495100277592551-242ac11c-0001-012","7938145744078630425-242ac11c-0001-012","2826183524049424871-242ac11c-0001-012","1394485106826482151-242ac11c-0001-012","8722753741409292776-242ac11c-0001-012","293362754747297305-242ac11c-0001-012","6976913440255045145-242ac11c-0001-012","1635382813071970791-242ac11c-0001-012","2790340604725358105-242ac11c-0001-012","6614953319037857305-242ac11c-0001-012","596856757474291225-242ac11c-0001-012","5077093416066018840-242ac11c-0001-012","7490867308604494311-242ac11c-0001-012","7325296860612390425-242ac11c-0001-012","4953493538860765671-242ac11c-0001-012","6933014270285442585-242ac11c-0001-012","8419526778125217305-242ac11c-0001-012","6706274296562848231-242ac11c-0001-012","5310786499607457305-242ac11c-0001-012","2849748875730162151-242ac11c-0001-012","1714309734955937305-242ac11c-0001-012","6164974964043485671-242ac11c-0001-012","3494100618393939480-242ac11c-0001-012","2728737446246739480-242ac11c-0001-012","1189861865604846056-242ac11c-0001-012","5738267484920475160-242ac11c-0001-012","3374231585856155160-242ac11c-0001-012","8904775073569435160-242ac11c-0001-012","2366080924918616551-242ac11c-0001-012","1602908186092376551-242ac11c-0001-012","1841923116114776551-242ac11c-0001-012","2541616238306136551-242ac11c-0001-012","2197374609531736551-242ac11c-0001-012","1993707260355416551-242ac11c-0001-012","3628844259615576551-242ac11c-0001-012","3252733973504856551-242ac11c-0001-012","2989624276951896551-242ac11c-0001-012","2685411743376216551-242ac11c-0001-012","2848663450297176551-242ac11c-0001-012","3438706057421656551-242ac11c-0001-012","4931851437876056551-242ac11c-0001-012","4181735399629656551-242ac11c-0001-012","3924638657291096551-242ac11c-0001-012","4476756703191896551-242ac11c-0001-012","4744762662462296551-242ac11c-0001-012","4357957907784536551-242ac11c-0001-012","6205695788196696551-242ac11c-0001-012","6393557657723736551-242ac11c-0001-012","5215877625160536551-242ac11c-0001-012","7158276584776536551-242ac11c-0001-012","5953881855632216551-242ac11c-0001-012","5531257073705816551-242ac11c-0001-012","6819446614795096551-242ac11c-0001-012","7640859110155096551-242ac11c-0001-012","7972301736387416551-242ac11c-0001-012","7313153105470296551-242ac11c-0001-012","7461458326201176551-242ac11c-0001-012","6964444710708056551-242ac11c-0001-012","8733756488295256551-242ac11c-0001-012","7793588147200856551-242ac11c-0001-012","8263242821018456551-242ac11c-0001-012","8112833066312536551-242ac11c-0001-012","8602072790999896551-242ac11c-0001-012","8425807333172056551-242ac11c-0001-012","7309695685264535065-242ac11c-0001-012","7885350151947415065-242ac11c-0001-012","8945756074025816551-242ac11c-0001-012","8961797805343895065-242ac11c-0001-012","9084118473933975065-242ac11c-0001-012","8485700680582295065-242ac11c-0001-012","6738379135550615065-242ac11c-0001-012","5624006920930455065-242ac11c-0001-012","7745763714827415065-242ac11c-0001-012","7446748091679895065-242ac11c-0001-012","7591789137265815065-242ac11c-0001-012","7066128089908375065-242ac11c-0001-012","6088937130722455065-242ac11c-0001-012","6240077029868695065-242ac11c-0001-012","6880327804683415065-242ac11c-0001-012","6389112395039895065-242ac11c-0001-012","5939858815878295065-242ac11c-0001-012","6576544767837335065-242ac11c-0001-012","5168912186246295065-242ac11c-0001-012","5462430251254935065-242ac11c-0001-012","5039977268020375065-242ac11c-0001-012","4858300151399575065-242ac11c-0001-012","5765010697258135065-242ac11c-0001-012","5338391595746455065-242ac11c-0001-012"]},"ir_cdr3_substrings":"CASSP"}
# curl -v -X GET -H "$jwt" http://aloe-dev02.tacc.utexas.edu/rh/v1public/rearrangement?filter%3D%7B%22filename_uuid%22%3A%7B%22%24in%22%3A%5B%221948223626708128231-242ac11c-0001-012%22%2C%224003519959228944871-242ac11c-0001-012%22%2C%22618590739453186536-242ac11c-0001-012%22%2C%224112542236705559016-242ac11c-0001-012%22%2C%22228498719656439320-242ac11c-0001-012%22%2C%225799996335674626536-242ac11c-0001-012%22%2C%224033258450224288231-242ac11c-0001-012%22%2C%224184909141241565671-242ac11c-0001-012%22%2C%225609034397249245671-242ac11c-0001-012%22%2C%22718414304763122151-242ac11c-0001-012%22%2C%226797709546090205671-242ac11c-0001-012%22%2C%226883137545118552551-242ac11c-0001-012%22%2C%227421212147472339431-242ac11c-0001-012%22%2C%222793798164965822951-242ac11c-0001-012%22%2C%221579330526434291225-242ac11c-0001-012%22%2C%222531606071098928665-242ac11c-0001-012%22%2C%228135350378552562151-242ac11c-0001-012%22%2C%224774237821721842151-242ac11c-0001-012%22%2C%222030956310420722151-242ac11c-0001-012%22%2C%227643474506018525671-242ac11c-0001-012%22%2C%221399495100277592551-242ac11c-0001-012%22%2C%227938145744078630425-242ac11c-0001-012%22%2C%222826183524049424871-242ac11c-0001-012%22%2C%221394485106826482151-242ac11c-0001-012%22%2C%228722753741409292776-242ac11c-0001-012%22%2C%22293362754747297305-242ac11c-0001-012%22%2C%226976913440255045145-242ac11c-0001-012%22%2C%221635382813071970791-242ac11c-0001-012%22%2C%222790340604725358105-242ac11c-0001-012%22%2C%226614953319037857305-242ac11c-0001-012%22%2C%22596856757474291225-242ac11c-0001-012%22%2C%225077093416066018840-242ac11c-0001-012%22%2C%227490867308604494311-242ac11c-0001-012%22%2C%227325296860612390425-242ac11c-0001-012%22%2C%224953493538860765671-242ac11c-0001-012%22%2C%226933014270285442585-242ac11c-0001-012%22%2C%228419526778125217305-242ac11c-0001-012%22%2C%226706274296562848231-242ac11c-0001-012%22%2C%225310786499607457305-242ac11c-0001-012%22%2C%222849748875730162151-242ac11c-0001-012%22%2C%221714309734955937305-242ac11c-0001-012%22%2C%226164974964043485671-242ac11c-0001-012%22%2C%223494100618393939480-242ac11c-0001-012%22%2C%222728737446246739480-242ac11c-0001-012%22%2C%221189861865604846056-242ac11c-0001-012%22%2C%225738267484920475160-242ac11c-0001-012%22%2C%223374231585856155160-242ac11c-0001-012%22%2C%228904775073569435160-242ac11c-0001-012%22%2C%222366080924918616551-242ac11c-0001-012%22%2C%221602908186092376551-242ac11c-0001-012%22%2C%221841923116114776551-242ac11c-0001-012%22%2C%222541616238306136551-242ac11c-0001-012%22%2C%222197374609531736551-242ac11c-0001-012%22%2C%221993707260355416551-242ac11c-0001-012%22%2C%223628844259615576551-242ac11c-0001-012%22%2C%223252733973504856551-242ac11c-0001-012%22%2C%222989624276951896551-242ac11c-0001-012%22%2C%222685411743376216551-242ac11c-0001-012%22%2C%222848663450297176551-242ac11c-0001-012%22%2C%223438706057421656551-242ac11c-0001-012%22%2C%224931851437876056551-242ac11c-0001-012%22%2C%224181735399629656551-242ac11c-0001-012%22%2C%223924638657291096551-242ac11c-0001-012%22%2C%224476756703191896551-242ac11c-0001-012%22%2C%224744762662462296551-242ac11c-0001-012%22%2C%224357957907784536551-242ac11c-0001-012%22%2C%226205695788196696551-242ac11c-0001-012%22%2C%226393557657723736551-242ac11c-0001-012%22%2C%225215877625160536551-242ac11c-0001-012%22%2C%227158276584776536551-242ac11c-0001-012%22%2C%225953881855632216551-242ac11c-0001-012%22%2C%225531257073705816551-242ac11c-0001-012%22%2C%226819446614795096551-242ac11c-0001-012%22%2C%227640859110155096551-242ac11c-0001-012%22%2C%227972301736387416551-242ac11c-0001-012%22%2C%227313153105470296551-242ac11c-0001-012%22%2C%227461458326201176551-242ac11c-0001-012%22%2C%226964444710708056551-242ac11c-0001-012%22%2C%228733756488295256551-242ac11c-0001-012%22%2C%227793588147200856551-242ac11c-0001-012%22%2C%228263242821018456551-242ac11c-0001-012%22%2C%228112833066312536551-242ac11c-0001-012%22%2C%228602072790999896551-242ac11c-0001-012%22%2C%228425807333172056551-242ac11c-0001-012%22%2C%227309695685264535065-242ac11c-0001-012%22%2C%227885350151947415065-242ac11c-0001-012%22%2C%228945756074025816551-242ac11c-0001-012%22%2C%228961797805343895065-242ac11c-0001-012%22%2C%229084118473933975065-242ac11c-0001-012%22%2C%228485700680582295065-242ac11c-0001-012%22%2C%226738379135550615065-242ac11c-0001-012%22%2C%225624006920930455065-242ac11c-0001-012%22%2C%227745763714827415065-242ac11c-0001-012%22%2C%227446748091679895065-242ac11c-0001-012%22%2C%227591789137265815065-242ac11c-0001-012%22%2C%227066128089908375065-242ac11c-0001-012%22%2C%226088937130722455065-242ac11c-0001-012%22%2C%226240077029868695065-242ac11c-0001-012%22%2C%226880327804683415065-242ac11c-0001-012%22%2C%226389112395039895065-242ac11c-0001-012%22%2C%225939858815878295065-242ac11c-0001-012%22%2C%226576544767837335065-242ac11c-0001-012%22%2C%225168912186246295065-242ac11c-0001-012%22%2C%225462430251254935065-242ac11c-0001-012%22%2C%225039977268020375065-242ac11c-0001-012%22%2C%224858300151399575065-242ac11c-0001-012%22%2C%225765010697258135065-242ac11c-0001-012%22%2C%225338391595746455065-242ac11c-0001-012%22%5D%7D%2C%22ir_cdr3_substrings%22%3A%22CASSP%22%7D


curl -v -X PATCH -H 'Content-Type: application/json' --data '{"c_cigar" : "slt"}' -H "$jwt" http://aloe-dev02.tacc.utexas.edu/rh/v1public/rearrangements/5d696c36e189c4000125b4d5
