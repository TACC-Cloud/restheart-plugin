# user testuser8:testuser8
# tenant header
# host https://dev.tenants.aloedev.tacc.cloud
# client create
#     "name": "rhapp",
#     "consumerKey": "ZQjwVGnlZxAcJVM2KfTp_Ep9Mzca",
#     "consumerSecret": "1SWrddB2JBXZEchZyigpRmU10qwa"
#
#  Used for testing RH server and configuration in anticipation of the VDJ project

###  RH call to v1public/sample
GET {{host}}/rh/v2/v1public/sample
Authorization: Bearer {{token}}
Content-Type: application/json

###

###  RH call to v1public/sample for 1 document
GET {{host}}/rh/v2/v1public/sample?pagesize=1&np
Authorization: Bearer {{token}}
Content-Type: application/json

###

###  RH call to /v1public/rearrangement for 1 document
GET {{host}}/rh/v2/v1public/rearrangement?pagesize=1&np
Authorization: Bearer {{token}}
Content-Type: application/json

###

###  RH call to /v1public/rearrangement for 1000 documents
#  works as expected
GET {{host}}/rh/v2/v1public/rearrangement?pagesize=1000&np
Authorization: Bearer {{token}}
Content-Type: application/json

###

###  RH call to /v1public/rearrangement document count
#
# DON'T use until i can investigate###  RH call to /v1public/rearrangement for 1 document
GET {{host}}/rh/v2/v1public/rearrangement?pagesize=1&np
Authorization: Bearer {{token}}
Content-Type: application/json

###


#
# count parameter generates an internal server error
GET {{host}}/rh/v2/v1public/rearrangement?count=true
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get v1public
#  this lists collections in v1public for vdj user with role Internal/vdj
GET {{host}}/rh/v2/v1public
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get v1public with testuser9 credentials
#  this lists collections in v1public for designsafe user with role Internal/designsafe
#  expect to get 403  !Results as expected
GET {{host}}/rh/v2/v1public
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get rearrangement
GET {{host}}/rh/v2/v1public/rearrangement
Authorization: Bearer {{token}}
Content-Type: application/json

###

###    create documnent one
POST {{host}}/rh/v2/v1public/rearrangement
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "steve",
  "rating": "cool"
}

###

###   get doc 1
GET {{host}}/rh/v2/v1public/rearrangement/5b0221082da651f2a63273f0
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get all docs
GET {{host}}/rh/v2/v1public/rearrangement
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get all docs and only show the name property {'name':1}
GET {{host}}/rh/v2/v1public/rearrangement?keys=%7B%27name%27%3A1%7D
Authorization: Bearer {{token}}
Content-Type: application/json

###







###############    possible useful RH calls    ###############

###  client create
POST {{host}}/clients/v2
Authorization: Basic {{user}} {{pass}}
Content-Type: application/x-www-form-urlencoded

clientName=rsthrtapp&description=test client app

###

###    create documnent two
# don't exercise this request yet
POST {{host}}/rh/v2/v1public/rearrangement
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "mongodb",
  "rating": "cool as well"
}

###

###   get doc 2
GET {{host}}/rh/v2/v1public/rearrangement/5c65868eda6a750c18085326
Authorization: Bearer {{token}}
Content-Type: application/json

###


###   create db
PUT {{host}}/rh/v2/api
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   create collection
PUT {{host}}/rh/v2/v1public/rearrangement
Authorization: Bearer {{token}}
Content-Type: application/json

###

###   get doc 1
GET {{host}}/rh/v2/v1public/rearrangement/5c65868eda6a750c18085326
Authorization: Bearer {{token}}
Content-Type: application/json

###

###    find document two
GET {{host}}/rh/v2/v1public/rearrangement?filter={'name':'mongodb'}
Authorization: Bearer {{token}}
Content-Type: application/json


###

###    find document one
GET {{host}}/rh/v2/v1public/rearrangement?filter={'name':'steve'}
Authorization: Bearer {{token}}
Content-Type: application/json


###

# /${JOB_ID}?status=${JOB_STATUS}&name=${JOB_NAME}&startTime=${JOB_START_TIME}&endTime=${JOB_END_TIME}&submitTime=${JOB_SUBMIT_TIME}&archiveSystem=${JOB_ARCHIVE_SYSTEM}&archivePath=${JOB_ARCHIVE_PATH}&message=${JOB_ERROR}https://de.sciapps.org/notification



# {
#   "exception" : "SystemError",
#   "error" : "SystemError: Warning caught during route execution: Use of uninitialized value in string eq at /home/zlu/project/AgaveWeb/MaizeCode/agavedancer/lib/iPC/SciApps.pm line 1341.\n at /usr/local/lib/perl5/site_perl/5.16.1/Dancer/Hook.pm line 62.\n"
# }